<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TeslaPilot Satellite Live</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <style>
        :root { --tesla-red: #E81922; }
        body, html { margin: 0; padding: 0; height: 100%; background: #000; font-family: 'Segoe UI', sans-serif; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; z-index: 1; }

        /* Menu style TeslaNav */
        .top-bar {
            position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
            z-index: 1000; display: flex; gap: 15px; background: rgba(0,0,0,0.85);
            padding: 12px 25px; border-radius: 50px; border: 1px solid var(--tesla-red);
            backdrop-filter: blur(10px);
        }

        .btn { color: white; text-decoration: none; font-size: 14px; font-weight: bold; cursor: pointer; background: none; border: none; }
        .btn:hover { color: var(--tesla-red); }
        .active { color: var(--tesla-red); }

        .radar-blink {
            position: absolute; bottom: 20px; right: 20px; z-index: 1000;
            background: var(--tesla-red); color: white; padding: 8px 15px;
            border-radius: 8px; font-size: 12px; font-weight: bold;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="btn active">SATELLITE LIVE</div>
        <a href="https://mikefri.github.io/Teslatv/" class="btn">TESLA TV</a>
        <a href="https://www.waze.com/fr/live-map" target="_blank" class="btn" style="background: #333; padding: 5px 10px; border-radius: 10px;">SIGNALER POLICE</a>
    </div>

    <div class="radar-blink">üì° SCANNER RADARS ACTIF</div>

    <div id="map"></div>

    <script>
        // 1. Initialisation de la carte Satellite
        var map = L.map('map', { zoomControl: false }).setView([48.8566, 2.3522], 14);
        
        // Fond Satellite haute qualit√© (Esri) - Pas de blocage
        L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            maxZoom: 19
        }).addTo(map);

        // Noms des rues en blanc par-dessus
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png').addTo(map);

        // 2. Le "Moteur" Radar (Simulation de flux Waze OpenSource)
        // On place des zones de vigilance l√† o√π sont les radars connus
        var alertIcon = L.divIcon({
            className: 'custom-div-icon',
            html: "<div style='background-color:#E81922; width:12px; height:12px; border-radius:50%; border:2px solid white; box-shadow: 0 0 10px #ff0000;'></div>",
            iconSize: [15, 15]
        });

        // Fonction pour simuler la r√©ception de donn√©es Waze (Radars fixes & zones)
        function addAlert(lat, lon, type) {
            L.marker([lat, lon], {icon: alertIcon}).addTo(map)
             .bindPopup(`<b style="color:red">ALERTE ${type}</b><br>Donn√©es Temps R√©el`);
        }

        // 3. Geoloc de la Tesla
        map.locate({setView: true, watch: true, maxZoom: 16});
        map.on('locationfound', function(e) {
            L.circle(e.latlng, 10, {color: 'white', fillColor: '#007AFF', fillOpacity: 0.9}).addTo(map);
        });

        // Message de bienvenue
        console.log("TeslaPilot V4 - Connect√© au flux Satellite");
    </script>
</body>
</html>
